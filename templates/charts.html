{% extends "base_app.html" %}
{% set page_class = 'page-charts' %}
{% set page_css = ['/static/css/app_shell.css', '/static/css/app_base.css', '/static/css/charts.css'] %}

{% block title %}Gráficos | Controle Financeiro{% endblock %}
{% block page_title %}Gráficos{% endblock %}

{% block content %}
  <div class="page charts-page">
    <section class="panel charts-hero">
      <div class="panel-head">
        <div>
          <h2 class="panel-title">Gráficos</h2>
          <p class="panel-subtitle">Acompanhe o comportamento financeiro do período e descubra onde ajustar seu orçamento.</p>
        </div>
        <div class="panel-actions">
          <label class="field field-inline">
            <span class="field-label">Ano</span>
            <select class="control">
              <option>2026</option>
              <option>2025</option>
              <option>2024</option>
            </select>
          </label>
          <label class="field field-inline">
            <span class="field-label">Mês</span>
            <select class="control">
              <option>Janeiro</option>
              <option>Fevereiro</option>
              <option>Março</option>
              <option>Abril</option>
              <option>Maio</option>
              <option>Junho</option>
              <option>Julho</option>
              <option>Agosto</option>
              <option>Setembro</option>
              <option>Outubro</option>
              <option>Novembro</option>
              <option>Dezembro</option>
            </select>
          </label>
          <button class="btn btn-ghost" type="button">Exportar</button>
        </div>
      </div>

      <div class="hero-grid">
        <div class="hero-stat">
          <span class="stat-label">Receitas no período</span>
          <strong>R$ 18.450</strong>
          <span class="stat-meta">+12% vs mês anterior</span>
        </div>
        <div class="hero-stat">
          <span class="stat-label">Despesas no período</span>
          <strong>R$ 8.640</strong>
          <span class="stat-meta">-6% vs mês anterior</span>
        </div>
        <div class="hero-stat">
          <span class="stat-label">Saldo projetado</span>
          <strong>R$ 9.810</strong>
          <span class="stat-meta">Fechamento estimado</span>
        </div>
        <div class="hero-stat">
          <span class="stat-label">Entradas registradas</span>
          <strong>42 lançamentos</strong>
          <span class="stat-meta">22 receitas · 20 despesas</span>
        </div>
      </div>

      <div class="hero-notes">
        <span class="note-pill">Atualizado há 2 horas</span>
        <span class="note-pill">Saldo anterior: R$ 1.280</span>
        <span class="note-pill">Comparativo com Janeiro/2025</span>
      </div>
    </section>

    <section class="charts-grid">
      <article class="panel chart-card span-2">
        <div class="chart-head">
          <div>
            <h3>Fluxo do mês</h3>
            <p>Receitas x despesas com saldo acumulado</p>
          </div>
          <div class="chart-legend">
            <span class="legend-item legend-income"><span class="legend-dot"></span>Receitas</span>
            <span class="legend-item legend-expense"><span class="legend-dot"></span>Despesas</span>
            <span class="legend-item legend-balance"><span class="legend-dot"></span>Saldo</span>
          </div>
        </div>

        <div class="chart-canvas chart-line">
          <svg class="chart-svg" viewBox="0 0 640 220" preserveAspectRatio="none" aria-hidden="true">
            <defs>
              <linearGradient id="incomeFill" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stop-color="rgba(76, 175, 80, 0.38)" />
                <stop offset="100%" stop-color="rgba(76, 175, 80, 0.02)" />
              </linearGradient>
              <linearGradient id="expenseFill" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stop-color="rgba(245, 166, 35, 0.32)" />
                <stop offset="100%" stop-color="rgba(245, 166, 35, 0.02)" />
              </linearGradient>
            </defs>
            <path class="area-income" d="M0 160 L90 120 L180 140 L270 100 L360 120 L450 80 L540 110 L640 90 L640 220 L0 220 Z" />
            <path class="area-expense" d="M0 180 L90 160 L180 170 L270 150 L360 165 L450 140 L540 155 L640 130 L640 220 L0 220 Z" />
            <path class="line-income" d="M0 160 L90 120 L180 140 L270 100 L360 120 L450 80 L540 110 L640 90" />
            <path class="line-expense" d="M0 180 L90 160 L180 170 L270 150 L360 165 L450 140 L540 155 L640 130" />
            <path class="line-balance" d="M0 130 L90 140 L180 120 L270 90 L360 100 L450 70 L540 80 L640 60" />
            <circle class="line-point" cx="270" cy="100" r="4" />
            <circle class="line-point" cx="450" cy="80" r="4" />
            <circle class="line-point alt" cx="640" cy="90" r="4" />
          </svg>
        </div>

        <div class="chart-footer">
          <div class="chart-kpi">
            <span class="kpi-label">Melhor semana</span>
            <strong>R$ 4.820</strong>
            <span class="kpi-meta">Semana 2</span>
          </div>
          <div class="chart-kpi">
            <span class="kpi-label">Maior saída</span>
            <strong>R$ 1.450</strong>
            <span class="kpi-meta">Moradia</span>
          </div>
          <div class="chart-kpi">
            <span class="kpi-label">Equilíbrio</span>
            <strong>54%</strong>
            <span class="kpi-meta">Receitas x despesas</span>
          </div>
        </div>
      </article>

      <article class="panel chart-card">
        <div class="chart-head">
          <div>
            <h3>Despesas por categoria</h3>
            <p>Top 5 do período</p>
          </div>
        </div>
        <div class="chart-canvas donut-wrap">
          <div class="donut" role="img" aria-label="Distribuição de despesas por categoria">
            <div class="donut-center">
              <span class="donut-value">R$ 8.640</span>
              <span class="donut-label">Total de despesas</span>
            </div>
          </div>
          <ul class="donut-legend">
            <li><span class="legend-dot dot-home"></span>Moradia 32%</li>
            <li><span class="legend-dot dot-mkt"></span>Mercado 21%</li>
            <li><span class="legend-dot dot-trans"></span>Transporte 18%</li>
            <li><span class="legend-dot dot-serv"></span>Serviços 16%</li>
            <li><span class="legend-dot dot-other"></span>Outros 13%</li>
          </ul>
        </div>
      </article>

      <article class="panel chart-card">
        <div class="chart-head">
          <div>
            <h3>Status das despesas</h3>
            <p>Pagas, em andamento e não pagas</p>
          </div>
        </div>
        <div class="chart-canvas bars">
          <div class="bar-row">
            <span class="bar-label">Pagas</span>
            <div class="bar-track">
              <div class="bar-fill bar-paid" style="width: 64%"></div>
            </div>
            <span class="bar-value">R$ 5.540</span>
          </div>
          <div class="bar-row">
            <span class="bar-label">Em andamento</span>
            <div class="bar-track">
              <div class="bar-fill bar-open" style="width: 22%"></div>
            </div>
            <span class="bar-value">R$ 1.900</span>
          </div>
          <div class="bar-row">
            <span class="bar-label">Não pagas</span>
            <div class="bar-track">
              <div class="bar-fill bar-late" style="width: 14%"></div>
            </div>
            <span class="bar-value">R$ 1.200</span>
          </div>
        </div>
      </article>
    </section>

    <section class="insights-grid">
      <article class="panel insight-card">
        <h3>Alertas do mês</h3>
        <ul class="insight-list">
          <li>3 despesas vencem nos próximos 7 dias.</li>
          <li>Assinatura de streaming 18% acima da média.</li>
          <li>Saldo projetado abaixo do alvo de R$ 2.000.</li>
        </ul>
      </article>
      <article class="panel insight-card">
        <h3>Metas e projeções</h3>
        <div class="progress">
          <div class="progress-head">
            <span>Meta de economia</span>
            <span>R$ 1.500 / R$ 2.000</span>
          </div>
          <div class="progress-track">
            <div class="progress-fill" style="width: 75%"></div>
          </div>
          <p class="insight-muted">Ritmo atual: 6 dias para atingir a meta.</p>
        </div>
        <div class="progress">
          <div class="progress-head">
            <span>Limite de despesas</span>
            <span>R$ 8.640 / R$ 10.000</span>
          </div>
          <div class="progress-track">
            <div class="progress-fill warning" style="width: 86%"></div>
          </div>
          <p class="insight-muted">Atenção com categorias variáveis.</p>
        </div>
      </article>
      <article class="panel insight-card">
        <h3>Próximas ações</h3>
        <div class="next-actions">
          <button class="btn" type="button">Revisar categorias</button>
          <button class="btn btn-ghost" type="button">Gerar relatório</button>
        </div>
        <p class="insight-muted">Personalize os filtros para comparar outros meses.</p>
      </article>
    </section>
  </div>
{% endblock %}
