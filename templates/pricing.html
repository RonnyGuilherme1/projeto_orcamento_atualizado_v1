{% extends "base_public.html" %}
{% set page_class = 'page-pricing' %}
{% set page_css = ['/static/css/pricing.css'] %}

{% block title %}Planos e Preços | LinkGestor{% endblock %}

{% block headline %}Planos que crescem com você{% endblock %}

{% block subhead %}
<p class="public-subtitle">
  Básico com dashboard e resumo mensal, Plus com gráficos e comparações e Pro com projeções e relatórios.
  O plano fica associado ao seu login e você pode trocar a qualquer momento.
</p>
{% endblock %}

{% block content %}
  <div class="pricing-grid">
    {% for key, plan in PLANS.items() %}
      <div class="pricing-card {% if plan.get('popular') %}popular{% endif %}">
        {% if plan.get('popular') %}
          <div class="badge">Mais vendido</div>
        {% endif %}
        <h3>{{ plan['name'] }}</h3>
        <div class="price">
          <span class="value">R$ {{ '%.2f'|format(plan['price_month']) }}</span>
          <span class="period">/ mês</span>
        </div>
        <ul class="plan-list">
          {% for item in plan['highlights'] %}
            <li>{{ item }}</li>
          {% endfor %}
        </ul>

        <div class="pricing-actions">
          {% if current_user.is_authenticated %}
            <a class="btn-primary" href="/buy?plan={{ key }}">Escolher {{ plan['name'] }}</a>
            <a class="btn-secondary" href="/app/upgrade">Já tenho conta</a>
          {% else %}
            <a class="btn-primary" href="/register?plan={{ key }}">Escolher {{ plan['name'] }}</a>
            <a class="btn-secondary" href="/login">Entrar</a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="pricing-note">
    <strong>Como funciona a compra agora?</strong>
    <p class="muted">
      {% if abacatepay_card_enabled %}
        Você escolhe um plano, faz o pagamento via PIX ou cartão (AbacatePay) e, em seguida, cria sua conta ou entra
        para ativar o plano automaticamente.
        <span style="display:block; margin-top:6px;">Cartão em beta: requer liberação no suporte da AbacatePay.</span>
      {% else %}
        Você escolhe um plano, faz o pagamento via PIX (AbacatePay) e, em seguida, cria sua conta ou entra
        para ativar o plano automaticamente.
      {% endif %}
    </p>
  </div>
{% endblock %}
