{% extends "layouts/base.html" %}

{#
  Sidebar em modo "drawer" por padrão (menu recolhido). O usuário abre/fecha pelo botão hamburger.
  Isso mantém a interface mais limpa no desktop e no mobile.
#}
{% set body_class = 'app-body sidebar-open ' ~ (page_class|default('')) %}
{% set css_bundle = (page_css|default([])) %}
{% set js_bundle  = ['/static/js/shell.js'] %}

{% block shell %}
  <div class="app-shell" data-app-shell>
    {% include "partials/app_sidebar.html" %}
    <div class="sidebar-overlay" data-sidebar-overlay></div>

    <div class="app-content">
      {% include "partials/app_mobilebar.html" %}

      {% if subscription_notice %}
        <div class="app-notice" role="status" aria-live="polite">
          <div class="app-notice-text">
            <strong>Seu plano vence em {{ subscription_notice.days_left }} dias.</strong>
            <span>Valido ate {{ subscription_notice.expires_at }}. Renove para manter o acesso.</span>
          </div>
          <a class="btn btn-ghost app-notice-cta" href="/app/account?section=billing">Ver assinatura</a>
        </div>
      {% endif %}

      <main class="app-main">
        {% include "partials/flash.html" %}
        {% block content %}{% endblock %}
      </main>
    </div>
  </div>
{% endblock %}
