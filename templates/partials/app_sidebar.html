<aside class="sidebar">
  <button class="sidebar-brand" type="button" data-sidebar-toggle aria-label="Abrir/fechar menu">
    <img class="sidebar-logo" src="/static/img/logo-recorte2.png" alt="Logo">
    <div class="sidebar-title">
      <span class="sidebar-name">Controle</span>
      <span class="sidebar-sub">Financeiro</span>
    </div>
  </button>

  <nav class="sidebar-nav" aria-label="Menu">
    <a class="nav-item" href="/app" data-route="/app" data-sidebar-close title="Dashboard"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z"/></svg></span><span class="nav-text">Dashboard</span></a>
    <a class="nav-item" href="/app/entradas" data-route="/app/entradas" data-sidebar-close title="Entradas"><span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 6h13"/><path d="M8 12h13"/><path d="M8 18h13"/><path d="M3 6h.01"/><path d="M3 12h.01"/><path d="M3 18h.01"/></svg></span><span class="nav-text">Entradas</span></a>


    <div class="nav-section">Análises</div>

    <a class="nav-item {% if not has_feature('charts') %}locked{% endif %}" href="{% if has_feature('charts') %}/app/charts{% else %}/app/upgrade{% endif %}" data-route="/app/charts" title="Gráficos" data-sidebar-close>
      <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M7 14v4"/><path d="M12 10v8"/><path d="M17 6v12"/></svg></span><span class="nav-text">Gráficos</span>
      {% if not has_feature('charts') %}<span class="pill">Plus</span>{% endif %}
    </a>
    <a class="nav-item {% if not has_feature('insights') %}locked{% endif %}" href="{% if has_feature('insights') %}/app/insights{% else %}/app/upgrade{% endif %}" data-route="/app/insights" title="Insights" data-sidebar-close>
      <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none"stroke="currentColor" stroke-width="2"stroke-linecap="round" stroke-linejoin="round"><path d="M4 19V5"/><path d="M10 19V9"/><path d="M16 19V13"/><path d="M22 19V3"/></svg></span><span class="nav-text">Insights</span>
      {% if not has_feature('insights') %}<span class="pill">Plus</span>{% endif %}
    </a>
    <a class="nav-item {% if not has_feature('filters') %}locked{% endif %}" href="{% if has_feature('filters') %}/app/filters{% else %}/app/upgrade{% endif %}" data-route="/app/filters" title="Regras &amp; Automação" data-sidebar-close>
      <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none"stroke="currentColor" stroke-width="2"stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"/><path d="M4 12h10"/><path d="M4 17h6"/><circle cx="18" cy="12" r="2"/></svg></span><span class="nav-text">Regras &amp; Automação</span>
      {% if not has_feature('filters') %}<span class="pill">Plus</span>{% endif %}
    </a>
    <a class="nav-item {% if not has_feature('projection') %}locked{% endif %}" href="{% if has_feature('projection') %}/app/projection{% else %}/app/upgrade{% endif %}" data-route="/app/projection" title="Projeção" data-sidebar-close>
      <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M7 15l4-4 3 3 5-7"/></svg></span><span class="nav-text">Projeção</span>
      {% if not has_feature('projection') %}<span class="pill">Pro</span>{% endif %}
    </a>
    <a class="nav-item {% if not has_feature('reports') %}locked{% endif %}" href="{% if has_feature('reports') %}/app/reports{% else %}/app/upgrade{% endif %}" data-route="/app/reports" title="Relatórios" data-sidebar-close>
      <span class="nav-icon" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 3h10a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="M8 7h8"/><path d="M8 11h8"/><path d="M8 15h5"/></svg></span><span class="nav-text">Relatórios</span>
      {% if not has_feature('reports') %}<span class="pill">Pro</span>{% endif %}
    </a>
  </nav>

  <div class="sidebar-spacer"></div>

  <div class="sidebar-footer">
    <button class="sidebar-user-toggle" type="button" data-user-menu-toggle>
      <div class="sidebar-user-avatar" aria-hidden="true">
        {{ (current_user.username[:2] if current_user.username else 'U')|upper }}
      </div>
      <div class="sidebar-user-meta">
        <div class="sidebar-user-name">{{ current_user.username }}</div>
        <div class="sidebar-user-plan">{{ PLANS.get(current_user.plan, PLANS['basic'])['name'] }}</div>
      </div>
      <span class="sidebar-user-chevron" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
      </span>
    </button>

    <div class="sidebar-user-menu" data-user-menu>
      <div class="sidebar-user-info">
        <strong>{{ current_user.username }}</strong>
        <span>{{ current_user.email }}</span>
      </div>
      <a class="user-menu-item" href="/app/account" data-sidebar-close>Minha conta</a>
      <a class="user-menu-item" href="/app/account?section=access" data-sidebar-close>Alterar senha</a>
      <a class="user-menu-item" href="/app/account?section=notifications" data-sidebar-close>Notificações</a>
      <a class="user-menu-item" href="/app/upgrade" data-sidebar-close>Gerenciar plano</a>
      <a class="user-menu-item danger" href="/logout" data-sidebar-close>Sair da conta</a>
    </div>
  </div>
</aside>
